!function (e) {
    var t = function () { }; t.__name__ = !0, t.main = function () {
        window.addEventListener("DOMContentLoaded", function () {
            t.div = window.document.getElementById("audio-div"), null == (t.canvas = window.document.getElementById("audio-canvas")) &&
                ((t.canvas = window.document.createElement("canvas")).id = "audio-canvas", t.div.appendChild(t.canvas)),
                t.canvas.width = t.div.clientWidth,
                t.canvas.height = t.div.clientHeight,
                null == (t.userMediaInfoDisplay = window.document.getElementById("audio-info")) &&
                ((t.userMediaInfoDisplay = window.document.createElement("p")).id = "audio-info"),
                t.canvas.width = t.div.clientWidth, t.canvas.height = t.div.clientHeight,
                t.selectMic = window.document.getElementById("audioSource"),
                t.userMediaInfoDisplay.style.display = "block",
                navigator.mediaDevices.getUserMedia({ audio: !0 }).then(t.onGetUserMedia, t.onGetUserMediaFailed), t.ctx = t.canvas.getContext("2d")
            t.div.appendChild(t.userMediaInfoDisplay),
                t.selectMic.addEventListener("change", function () {
                    t.userMediaInfoDisplay.style.display = "block",
                        navigator.mediaDevices.getUserMedia({ audio: { deviceId: t.selectMic.value } }).then(t.onGetUserMedia, t.onGetUserMediaFailed), t.ctx = t.canvas.getContext("2d")
                    t.div.appendChild(t.userMediaInfoDisplay)
                });
        })
    }, t.onGetUserMediaFailed = function (e) {
        window.console.log("Getting user media failed: " + n.string(e)),
            t.userMediaInfoDisplay.innerHTML = "NotFoundError" == e.name ? "<strong>We can't find your microphone</strong> - that most probably means that it's either not connected, broken, or you don't have the proper webcam drivers (see below)" : "Microphone not authorized. Please check your media permissions settings."
    }, t.onGetUserMedia = function (e) { t.canvas.width = 500, t.canvas.height = 100, t.userMediaInfoDisplay.style.display = "none", t.actx = new AudioContext, t.analyser = t.actx.createAnalyser(), (t.source = t.actx.createMediaStreamSource(e)).connect(t.analyser), t.visualize(e) }, t.visualize = function (e) { t.ctx.clearRect(0, 0, t.canvas.width, t.canvas.height); var n = .5 * t.canvas.height, r = t.canvas.width / t.analyser.frequencyBinCount, i = .5 * t.canvas.height, a = new g(t.analyser.frequencyBinCount), o = null; (o = function () { window.requestAnimationFrame(o), t.analyser.getFloatTimeDomainData(a), t.ctx.fillStyle = "white", t.ctx.fillRect(0, 0, t.canvas.width, t.canvas.height), t.ctx.lineWidth = 1, t.ctx.strokeStyle = "black", t.ctx.beginPath(); for (var e = 0, s = a.length; e < s;) { var l = e++; t.ctx.lineTo(l * r, a[l] * i + n) } t.ctx.stroke() })() }, Math.__name__ = !0; var n = function () { }; n.__name__ = !0, n.string = function (e) { return a.__string_rec(e, "") }; var r = function () { }; r.__name__ = !0, r.i32ToFloat = function (e) { var t = e >>> 23 & 255, n = 8388607 & e; return 0 == n && 0 == t ? 0 : (1 - (e >>> 31 << 1)) * (1 + Math.pow(2, -23) * n) * Math.pow(2, t - 127) }, r.floatToI32 = function (e) { if (0 == e) return 0; var t = 0 > e ? -e : e, n = Math.floor(Math.log(t) / .6931471805599453); return -127 > n ? n = -127 : 128 < n && (n = 128), 8388608 == (t = Math.round(8388608 * (t / Math.pow(2, n) - 1))) && 128 > n && (t = 0, ++n), (0 > e ? -2147483648 : 0) | n + 127 << 23 | t }; var i = function (e) { Error.call(this), this.val = e, this.message = String(e), Error.captureStackTrace && Error.captureStackTrace(this, i) }; i.__name__ = !0, i.wrap = function (e) { return e instanceof Error ? e : new i(e) }, i.__super__ = Error, i.prototype = function (e, t) { function n() { } for (var r in n.prototype = e, e = new n, t) e[r] = t[r]; return t.toString !== Object.prototype.toString && (e.toString = t.toString), e }(Error.prototype, { __class__: i }); var a = function () { }; a.__name__ = !0, a.getClass = function (e) { if (e instanceof Array && null == e.__enum__) return Array; var t = e.__class__; return null != t ? t : null != (e = a.__nativeClassName(e)) ? a.__resolveNativeClass(e) : null }, a.__string_rec = function (e, t) { if (null == e) return "null"; if (5 <= t.length) return "<...>"; var n = typeof e; switch ("function" == n && (e.__name__ || e.__ename__) && (n = "object"), n) { case "function": return "<function>"; case "object": if (e instanceof Array) { if (e.__enum__) { if (2 == e.length) return e[0]; n = e[0] + "(", t += "\t"; for (var r = 2, i = e.length; r < i;) { var o = r++; n = 2 != o ? n + "," + a.__string_rec(e[o], t) : n + a.__string_rec(e[o], t) } return n + ")" } for (n = e.length, r = "[", t += "\t", i = 0; i < n;)r += (0 < (o = i++) ? "," : "") + a.__string_rec(e[o], t); return r + "]" } try { r = e.toString } catch (e) { return "???" } if (null != r && r != Object.toString && "function" == typeof r && "[object Object]" != (n = e.toString())) return n; for (n in n = null, r = "{\n", t += "\t", i = null != e.hasOwnProperty, e) i && !e.hasOwnProperty(n) || "prototype" == n || "__class__" == n || "__super__" == n || "__interfaces__" == n || "__properties__" == n || (2 != r.length && (r += ", \n"), r += t + n + " : " + a.__string_rec(e[n], t)); return r + "\n" + (t = t.substring(1)) + "}"; case "string": return e; default: return String(e) } }, a.__interfLoop = function (e, t) { if (null == e) return !1; if (e == t) return !0; var n = e.__interfaces__; if (null != n) for (var r = 0, i = n.length; r < i;) { var o = r++; if ((o = n[o]) == t || a.__interfLoop(o, t)) return !0 } return a.__interfLoop(e.__super__, t) }, a.__instanceof = function (e, t) { if (null == t) return !1; switch (t) { case Array: return e instanceof Array && null == e.__enum__; case c: return "boolean" == typeof e; case u: return !0; case f: return "number" == typeof e; case _: return "number" == typeof e && (0 | e) === e; case String: return "string" == typeof e; default: if (null == e) return !1; if ("function" == typeof t) { if (e instanceof t || a.__interfLoop(a.getClass(e), t)) return !0 } else if ("object" == typeof t && a.__isNativeObj(t) && e instanceof t) return !0; return t == h && null != e.__name__ || t == y && null != e.__ename__ || e.__enum__ == t } }, a.__nativeClassName = function (e) { return "Object" == (e = a.__toStr.call(e).slice(8, -1)) || "Function" == e || "Math" == e || "JSON" == e ? null : e }, a.__isNativeObj = function (e) { return null != a.__nativeClassName(e) }, a.__resolveNativeClass = function (t) { return e[t] }; var o = function (e) { if (e instanceof Array && null == e.__enum__) this.a = e, this.byteLength = e.length; else { this.a = []; for (var t = 0; t < e;) { var n = t++; this.a[n] = 0 } this.byteLength = e } }; o.__name__ = !0, o.sliceImpl = function (e, t) { return e = new p(this, e, null == t ? null : t - e), t = new d(e.byteLength), new p(t).set(e), t }, o.prototype = { slice: function (e, t) { return new o(this.a.slice(e, t)) }, __class__: o }; var s = function () { }; s.__name__ = !0, s._new = function (e, t, l) { if ("number" == typeof e) { var _ = []; for (t = 0; t < e;) { var u = t++; _[u] = 0 } for (_.byteLength = _.length << 2, _.byteOffset = 0, e = [], t = 0, u = _.length << 2; t < u;)t++ , e.push(0); _.buffer = new o(e) } else if (a.__instanceof(e, o)) { for (null == t && (t = 0), null == l && (l = e.byteLength - t >> 2), _ = [], u = 0; u < l;) { u++; var f = e.a[t++] | e.a[t++] << 8 | e.a[t++] << 16 | e.a[t++] << 24; _.push(r.i32ToFloat(f)) } _.byteLength = _.length << 2, _.byteOffset = t, _.buffer = e } else { if (!(e instanceof Array && null == e.__enum__)) throw new i("TODO " + n.string(e)); for (_ = e.slice(), e = [], t = 0; t < _.length;)u = _[t], ++t, u = r.floatToI32(u), e.push(255 & u), e.push(u >> 8 & 255), e.push(u >> 16 & 255), e.push(u >>> 24); _.byteLength = _.length << 2, _.byteOffset = 0, _.buffer = new o(e) } return _.subarray = s._subarray, _.set = s._set, _ }, s._set = function (e, t) { if (a.__instanceof(e.buffer, o)) { if (e.byteLength + t > this.byteLength) throw new i("set() outside of range"); for (var n = 0, r = e.byteLength; n < r;) { var s = n++; this[s + t] = e[s] } } else { if (!(e instanceof Array && null == e.__enum__)) throw new i("TODO"); if (e.length + t > this.byteLength) throw new i("set() outside of range"); for (n = 0, r = e.length; n < r;)this[(s = n++) + t] = e[s] } }, s._subarray = function (e, t) { return (t = s._new(this.slice(e, t))).byteOffset = 4 * e, t }; var l = function () { }; l.__name__ = !0, l._new = function (e, t, r) { if ("number" == typeof e) { for (r = [], t = 0; t < e;) { r[t++] = 0 } r.byteLength = r.length, r.byteOffset = 0, r.buffer = new o(r) } else if (a.__instanceof(e, o)) null == t && (t = 0), null == r && (r = e.byteLength - t), (r = 0 == t ? e.a : e.a.slice(t, t + r)).byteLength = r.length, r.byteOffset = t, r.buffer = e; else { if (!(e instanceof Array && null == e.__enum__)) throw new i("TODO " + n.string(e)); (r = e.slice()).byteLength = r.length, r.byteOffset = 0, r.buffer = new o(r) } return r.subarray = l._subarray, r.set = l._set, r }, l._set = function (e, t) { if (a.__instanceof(e.buffer, o)) { if (e.byteLength + t > this.byteLength) throw new i("set() outside of range"); for (var n = 0, r = e.byteLength; n < r;) { var s = n++; this[s + t] = e[s] } } else { if (!(e instanceof Array && null == e.__enum__)) throw new i("TODO"); if (e.length + t > this.byteLength) throw new i("set() outside of range"); for (n = 0, r = e.length; n < r;)this[(s = n++) + t] = e[s] } }, l._subarray = function (e, t) { return (t = l._new(this.slice(e, t))).byteOffset = e, t }, String.prototype.__class__ = String, String.__name__ = !0, Array.__name__ = !0; var _ = { __name__: ["Int"] }, u = { __name__: ["Dynamic"] }, f = Number; f.__name__ = ["Float"]; var c = Boolean; c.__ename__ = ["Bool"]; var h = { __name__: ["Class"] }, y = {}, d = e.ArrayBuffer || o; null == d.prototype.slice && (d.prototype.slice = o.sliceImpl); var g = e.Float32Array || s._new, p = e.Uint8Array || l._new; a.__toStr = {}.toString, s.BYTES_PER_ELEMENT = 4, l.BYTES_PER_ELEMENT = 1, t.main()
}("undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : this);


