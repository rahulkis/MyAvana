@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@addTagHelper AuthoringTagHelpers.TagHelpers.EmailTagHelper, AuthoringTagHelpers
@model MyavanaAdminModels.HairProfileCustomerModel
@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor
@inject MyavanaAdminApiClient.ApiClient Salons
@{
    Layout = "_Layout";

    //var count = 0;
}

<link href="~/css/styleCustomer.css" rel="stylesheet" />
<link href="~/css/owl.carousel.min.css" rel="stylesheet" />
<link href="~/css/owl.theme.default.css" rel="stylesheet" />
<link href="~/css/jquery.nailthumb.1.1.min.css" rel="stylesheet" type="text/css">
<script src="~/js/shadowbox.js"></script>
<script src="~/js/jquery.nailthumb.1.1.min.js"></script>
<link href="~/css/shadowbox.css" rel="stylesheet" />
<style>
    .txtFormat {
        white-space: pre-line;
        white-space: pre-wrap;
        border: none;
    }

        .txtFormat:focus {
            outline: none;
        }

    .alert-success, .alert-danger, .alert-info {
        top: 110px !important;
        width: 60% !important;
        margin: 0 auto;
        z-index: 99;
        position: fixed;
        left: 50%;
        transform: translateX(-40%);
        text-align: center;
        padding: 12px;
        transition: all 1s linear;
        box-shadow: 0px 0px 12px 3px rgba(0, 0, 0, 0.2);
        font-size: 16px;
    }

    .alert-danger {
        color: #80172a;
        background-color: #fdd5dc;
        border-color: #fcc4ce;
    }

        .alert-danger hr {
            border-top-color: #fbacba;
        }

        .alert-danger .alert-link {
            color: #550f1c;
        }

    .alert-success {
        color: #1c6356;
        background-color: #a8ffc3;
        border-color: #13b755;
    }

        .alert-success hr {
            border-top-color: #b4e7dd;
        }

        .alert-success .alert-link {
            color: #113b33;
        }

    .select2-container, .select2-container li.select2-search {
        width: 100% !important;
    }

    .preloader {
        width: 100%;
        height: 100%;
        top: 0px;
        position: fixed;
        z-index: 99999;
        background: rgba(255, 255, 255, .8);
    }

        .preloader img {
            position: absolute;
            LEFT: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 80px;
        }

    .loader {
        overflow: visible;
        padding-top: 2em;
        height: 0;
        width: 2em;
    }

    .centertextdiv {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        height: calc(100% - 80px);
    }

        .centertextdiv a {
            background: #ffdede;
            padding: 7px 15px;
            color: #383838;
            border-radius: 4px;
            border: 1px solid #ffbaba;
            text-transform: uppercase;
        }

            .centertextdiv a:hover {
                background: #383838;
                color: #ffdede;
                border: 1px solid #ffdede;
            }

        .centertextdiv p {
            font-size: 16px;
            margin-bottom: 30px;
        }

    .accordion-toggle:after {
        font-family: 'FontAwesome';
        content: "\f078";
        float: right;
    }

    .accordion-opened .accordion-toggle:after {
        content: "\f054";
    }

    #accordion2 .accordion-heading {
        padding: 6px 15px;
        margin-bottom: 5px;
        border-radius: 4px;
    }

    #accordion21 .accordion-heading {
        padding: 6px 15px;
        margin-bottom: 5px;
        border-radius: 4px;
    }

    .products_tab .nav-link.active {
        background: #756966;
    }

    .products_tab .nav-link {
        color: #756966;
    }

        .products_tab .nav-link:hover {
            background: #756966;
            color: #fff;
        }

    .listhead {
        border-bottom: 1px solid #ccc;
        padding-bottom: 5px;
        margin-bottom: 20px;
    }

    .boservationsubparts {
        display: flex;
        align-items: baseline;
    }

        .boservationsubparts h4 {
            width: 30%;
            text-align: right;
        }

    .Observations .boservationsubparts p {
        background: #ffefee;
        padding: 10px 15px;
        border-radius: 4px;
        margin-left: 10px;
    }

    .Porositynelasticity {
        border-top: 1px solid #ccc;
        padding-top: 20px;
        margin-top: 20px;
    }

    .stylistcrousel .hairsteps {
        box-shadow: 0 1px 6px 0 rgba(32, 33, 36, .28);
        left: 0;
        padding: 15px;
        border-radius: 4px;
        background: #eee;
    }

        .stylistcrousel .hairsteps p {
            word-break: break-word;
        }

    .textFormat {
        white-space: pre-wrap;
    }

    .table-id-data th {
        width: 90px;
    }

    .demo {
        width: 150px;
        height: 150px;
        background-position: center center;
        background-repeat: no-repeat;
        display: inline-block;
    }

    .tab-section {
        padding: 20px 0;
    }

        .tab-section .nav-pills .nav-link.active {
            background: #E9C6C6;
            color: #383838;
            font-weight: bold;
        }

        .tab-section .nav-pills .nav-link {
            color: #707070;
            font-size: 18px;
            position: relative;
            border: none;
            width: 19%;
            /* background: #d8d9e3; */
            margin-left: 1%;
            border-radius: 3px;
            text-align: center;
            line-height: normal;
            padding: 10px;
            min-height: 58px;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
        }

            .tab-section .nav-pills .nav-link:first-child {
                margin-left: 0;
            }

    .products_tab .nav .nav-link {
        width: 100%;
        margin-bottom: 15px;
    }

        .products_tab .nav .nav-link.active:after {
            content: "";
            position: absolute;
            top: 50%;
            left: auto;
            right: -10px;
            transform: translateY(-50%);
            width: 0;
            height: 0;
            border-left: 7px solid transparent;
            border-right: 7px solid transparent;
            border-top: 7px solid #6d7071;
            background: transparent;
            transform: rotate( -90deg );
        }

    .hair_analyst_notes {
        border: 1px solid #d8dfeb;
        padding: 10px;
        height: 100px;
        overflow: auto;
    }
    .divSalonNotes .hair_analyst_notes {
        height: auto;
        max-height: 100px;
    }
    .divSalonNotes {
        max-height: 240px;
        overflow: auto;
        border: 1px solid #d8dfeb;
        margin-bottom: 15px;
    }
        .divSalonNotes tr td:first-child {
            width: 60%;
            border-left: 0;
        }
        .divSalonNotes tbody tr:last-child td {
            border-bottom: 0;
        }
        .divSalonNotes .table th {
            position: sticky;
            z-index: 2;
            top: 0;
            background: #fdefef;
        }
</style>
<div id="alert-success" class="alert alert-success alert-dismissible" style="display:none; width:50%" data-keyboard="false" data-backdrop="static">
    <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
    <span id="successMessage"></span>
</div>
<div class="alert alert-danger alert-dismissible" style="display:none; width:50%" data-keyboard="false" data-backdrop="static">
    <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
    <span id="failureMessage"></span>
</div>

<div class="preloader" style="display:none;">
    <div class="loader">
        <img src="~/images/loader.gif" />
    </div>
</div>
@if (Model == null)
{
    @if (ViewBag.IsExist)
    {
        <div class="centertextdiv">
            <p> Thank you for completing your questionnaire. Your hair profile will be ready soon!</p>

        </div>
    }
    else
    {
        <div class="centertextdiv">
            <p>
                Start your hair journey with MYAVANA and complete your hair care questionnaire now!
            </p>
            <div>
                <a asp-action="start" asp-controller="Questionaire">  Start  </a>
            </div>
        </div>
    }
}
else
{
    <div class="wrapper wrapper-content animated fadeInRight">
        <div class="row">
            <div class="col-lg-12">
                <div class="ibox ">
                    @*<div class="ibox-title text-left">
                            <span class="cursive-text-info">Recommendations</span>
                            <h3 class="main-head-text-info">The Healthy Hair Care Plan</h3>
                        </div>*@
                    <div class="selectbox-main-section">
                        <div class="ibox-title text-left w-100">
                            <span class="cursive-text-info">Recommendations</span>
                            <h3 class="main-head-text-info">The Healthy Hair Care Plan</h3>
                        </div>
                        <div class="outerProfileDiv">
                            @if (HttpContextAccessor.HttpContext.Request.Cookies["UserTypeId"].ToString() == "2")
                            {
                                <div class="addNotes">
                                    <span class="align-right">
                                        <a class="btn btn-primary" onclick="OpenNotesModal()">Add Notes</a>
                                    </span>
                                </div>
                            }
                            @if (Model.CustomerTypeId == 2 || Model.CustomerTypeId == 3)
                            {
                                <span class="d-block text-right mb-3" title="Add New Hair Profile" onclick="createHHCPHairKitUser()"><i class="fa fa-user-plus" aria-hidden="true"></i></span>
                            }
                            <select class="form-control w-auto" id="ddlHHCP" onchange="changeHHCP()" asp-for="@Model.HairProfileId"
                                    asp-items="@Salons.GetHHCPList(Model.UserId).Result.Select(a => new SelectListItem() { Text = a.HairProfile, Value=a.HairProfileId.ToString()})"></select>
                        </div>
                    </div>
                    <div id="divPartial">
                        @Html.Partial("_customerHair", Model)
                    </div>
                </div>
            </div>
        </div>
    </div>
}
<div class="modal fade" id="addNotesModal" tabindex="-1" role="dialog" aria-labelledby="addNotes" aria-hidden="true" data-keyboard="false" data-backdrop="static">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 id="headerText" class="font-bold">Add Notes</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body p-3">
                <div class="form-group  row">
                    <label class="col-sm-2 col-form-label">Notes</label>
                    <div class="col-sm-10">
                        <textarea id="txtMyNotes" rows="4" style="width:100%;" placeholder="Write something..."></textarea>
                        <span class="text-danger mt-2 d-block text-center" id="NotesValidation">
                            <span id="NotesError"></span>
                        </span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" id="saveNotes" onclick="SaveNotes()">Save</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal">Cancel</button>
            </div>
        </div>
    </div>
</div>

<script src="~/js/owl.carousel.min.js"></script>
<script>
    $(document).ready(function () {
        $(".showHide2:first").addClass('active');
        $('.showHide2Active:first').addClass('active');
        $('.showHide2Active:first').addClass('show');
    });

    $(document).ready(function () {
        $(".showHide1:first").addClass('active');
        $('.showHide1Active:first').addClass('active');
        $('.showHide1Active:first').addClass('show');
    });

    $('.crousalnav').owlCarousel({
        loop: false,
        center: false,
        margin: 20,
        responsiveClass: true,
        responsive: {
            0: {
                items: 1,
                nav: true,
                loop: false
            },
            600: {
                items: 1,
                nav: true,
                loop: false
            },
            1000: {
                items: 3,
                nav: true,
                loop: false
            }
        }
    })

   
</script>
<script>
    $('.owl-carousel').owlCarousel({
        loop: false,
        margin: 00,
        responsiveClass: true,
        responsive: {
            0: {
                items: 1,
                nav: true,
                loop: false
            },
            600: {
                items: 1,
                nav: true,
                loop: false
            },
            1000: {
                items: 3,
                nav: true,
                loop: false
            }
        }
    })
</script>
<script>
    $('.crousalslide').owlCarousel({
        loop: true,
        margin: 00,
        responsiveClass: true,
        responsive: {
            0: {
                items: 1,
                nav: true,
                loop: true
            },
            600: {
                items: 1,
                nav: true,
                loop: true
            },
            1000: {
                items: 1,
                nav: true,
                loop: true
            }
        }
    })
</script>
<script>
    /**
  * EFECTO PARA FLECHAS EN ACORDEON
  */

    $(document).on('show', '.accordion', function (e) {
        //$('.accordion-heading i').toggleClass(' ');
        $(e.target).prev('.accordion-heading').addClass('accordion-opened');
    });

    $(document).on('hide', '.accordion', function (e) {
        $(this).find('.accordion-heading').not($(e.target)).removeClass('accordion-opened');
        //$('.accordion-heading i').toggleClass('fa-chevron-right fa-chevron-down');
    });
</script>
<script>

    $(document).on('show', '.accordion', function (e) {
        //$('.accordion-heading i').toggleClass(' ');
        $(e.target).prev('.accordion-heading').addClass('accordion-opened');
    });

    $(document).on('hide', '.accordion', function (e) {
        $(this).find('.accordion-heading').not($(e.target)).removeClass('accordion-opened');
        //$('.accordion-heading i').toggleClass('fa-chevron-right fa-chevron-down');
    });
</script>
<script>
    $(document).ready(function () {
        $(".showHide:first").addClass('active');
        $('.showHideActive:first').addClass('active');
        $('.showHideActive:first').addClass('show');
        $('.demo').nailthumb({
            imageCustomFinder: function (el) {
                var image = $('<img />').attr('src', el.attr('href').replace('/full/', '/small/')).css('display', 'none');
                image.attr('alt', el.attr('title'));
                el.append(image);
                return image;
            },
            titleAttr: 'alt'
        });



    });
    jQuery.fn.load = function (callback) {
        $(window).on("load", function () {
            Shadowbox.init();
            $('.demo').css("display", "block");
        })

    };
</script>