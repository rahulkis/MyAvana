@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@addTagHelper AuthoringTagHelpers.TagHelpers.EmailTagHelper, AuthoringTagHelpers

<script type="text/javascript">
    var showOrderNumber = false;
    function paymentToDo(haveKit) {
        showOrderNumber = haveKit;
        if (!haveKit) {
            $("span.consultationPrice").html("$0 USD");
            $("#btnProceedPayment").html("Proceed");
            $("#divOrderNumber").css("display", "block");
            $("#divPayment").css("display", "none");
        }
        else {
            $("span.consultationPrice").html("$45 USD");
            $("#btnProceedPayment").html("Proceed to Payment");
            $("#divOrderNumber").css("display", "none");
            $("#divPayment").css("display", "block");
        }
    }
</script>
<div id="progressbar">

    <ul class="nav nav-pills hairkit_tabs" role="tablist">
        <li class="nav-item">
            <a class="nav-link btn active" id="nothave_kit" data-toggle="pill" href="#nothave_kit" role="tab" aria-controls="nothave_kit" aria-selected="true" onclick="paymentToDo(true)">I don't have a Hair Kit</a>
        </li>
        <li class="nav-item ml-3">
            <a class="nav-link btn " id="have_kit" data-toggle="pill" href="#have_kit" role="tab" aria-controls="have_kit" aria-selected="false" onclick="paymentToDo(false)">I have a Hair Kit</a>
        </li>
    </ul>
    <div class="hairtext_img">
       <img src="/images/text_img.png" alt="img"/>
    </div>
    

    
    <fieldset id="divWel" class="inActive">
        <div class="centertextdiv justify-content-start fieldset3">
            <div class="container-fluid h-100">
                <div class="row h-100">
                    <div class="col-lg-8 form_div">

                        <div class=" form_div_inner"><div id="divOrderNumber" style="display:none">
    <div class="back_icons mb-5 previous">
        <a href="#"><i class="fa fa-angle-left" aria-hidden="true"></i></a>
    </div>

    <div class="order-num_section">
        <h2 class="desc_heading mb-4">Enter Your Order Number</h2>
        <div class="form-group">
            <label>Order number*</label>
            <input type="text" class="form-control" />
        </div>

        <button class="btn btn-confirm_order" onclick="confirmOrderNumber()">Confirm</button>

    </div>
</div><div id="divPayment">
    <div class="form_box">
        <h4 class="form_heading">
            Payment
        </h4>
        <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" id="pills-home-tab" data-toggle="pill" href="#pills-home" role="tab" aria-controls="pills-home" aria-selected="true">Card</a>
            </li>

        </ul>
        <div class="tab-content pt-3" id="pills-tabContent">
            <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">
                <div class="row">
                    <div class="col-lg-6">
                        <div class="form-group">
                            <label>Cardholder Name <sup>*</sup></label>
                            <input id="txtCardName" class="form-control" type="text">
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="form-group">
                            <label>Card Number <sup>*</sup></label>
                            <input id="txtCardNumber" class="form-control" type="number">
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="form-group">
                            <label>Expiration Date <sup>*</sup></label>
                            <div class="expire_dropdown">
                                <select id="expireYear" class="form-control">
                                    <option value="0">-- select year --</option>
                                    <option value="2021">2021</option>
                                    <option value="2022">2022</option>
                                    <option value="2023">2023</option>
                                    <option value="2024">2024</option>
                                    <option value="2025">2025</option>
                                    <option value="2026">2026</option>
                                    <option value="2027">2027</option>
                                    <option value="2028">2028</option>
                                    <option value="2029">2029</option>
                                    <option value="2030">2030</option>
                                    <option value="2031">2031</option>
                                    <option value="2032">2032</option>
                                </select>
                                <select id="expireMonth" class="form-control">
                                    <option value="0">-- select month --</option>
                                    <option value="01">January</option>
                                    <option value="02">February</option>
                                    <option value="03">March</option>
                                    <option value="04">April</option>
                                    <option value="05">May</option>
                                    <option value="06">June</option>
                                    <option value="07">July</option>
                                    <option value="08">August</option>
                                    <option value="09">September</option>
                                    <option value="10">October</option>
                                    <option value="11">November</option>
                                    <option value="12">December</option>
                                    <option>fab</option>
                                    <option>march</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-6">
                        <div class="form-group">
                            <label>CVV <sup>*</sup></label>
                            <input id="txtCvv" class="form-control" type="number">
                        </div>
                    </div>
                    <div class="col-lg-12">
                        <div class="secure_info">
                            <p><i class="fa fa-lock" aria-hidden="true"></i> Your payment data is encrypted and secure.</p>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-6">
                        <div class="d-flex font-bold justify-content-between text-dark">
                            <span>TOTAL PRICE</span>
                            <span>$45</span>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-6">
                        <button type="button" onclick="PayViaStripe()" class="form_btn">Pay and Schedule Event</button>
                    </div>
                </div>
            </div>
            <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">

                <div class="row">
                    <div class="col-lg-6">
                        <hr>
                        <div class="d-flex font-bold justify-content-between text-dark">
                            <span>TOTAL PRICE</span>
                            <span>$45</span>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-6">
                        <div id="paypal-payment-button" class="col-lg-6">Pay with <img src="~/images/PayPal.png"></div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </fieldset>

    <fieldset id="divRequestSuccesss" class="inActive">
        <div class="centertextdiv justify-content-start fieldset4">
            <div class="container-fluid h-100">
                <div class="row full_height">
                    <div class="col-lg-4 leftdiscription">
                        <div class="leftdiscription_inner">
                            <h2 class="desc_heading">Myavana Hair Coaching Session</h2>
                            <ul class="disc_list" id="disc_list">
                                <li>
                                    30 min
                                </li>
                                <li>
                                    Web conferencing details provided upon confirmation.
                                </li>
                                <li>
                                    $45 USD
                                </li>
                                <li>
                                    10:00-10:30, Friday, August 12, 2021
                                </li>
                                <li>
                                    Atlanta Time(GMT-4)
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-lg-8 form_div">
                        <div class="scusses_msg">
                            <div class="tick_icon">

                            </div>
                            <h2 class="font-bold">
                                Your Request is Successful!
                            </h2>
                            <p class="mb-2">We will contact you soon.</p>
                            @*<a asp-controller="HairProfile" asp-action="CustomerHair" class="form_btn w-auto pl-4 pr-4">Done</a>*@
                            <button type="button" onclick="redirectTo();" class="form_btn w-auto pl-4 pr-4">Done</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </fieldset>

</div>
<script src="https://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>


<script>

    //jQuery time
    var check = false;
    var current_fs, next_fs, previous_fs; //fieldsets
    var left, opacity, scale; //fieldset properties which we will animate
    var animating; //flag to prevent quick multi-click glitches
    var i = 1;

    $(".next").click(function () {

        if (animating) return false;
        animating = true;


        current_fs = $(".fieldset" + i).parent();
        next_fs = current_fs.next();
        i++;

        //activate next step on progressbar using the index of next_fs

        $("#progressbar fieldset").eq($("fieldset").index(next_fs)).addClass("active");

        current_fs.addClass("inActive");
        next_fs.removeClass("inActive");
        //show the next fieldset
        next_fs.show();
        //hide the current fieldset with style
        current_fs.animate({ opacity: 0 }, {
            step: function (now, mx) {
                //as the opacity of current_fs reduces to 0 - stored in "now"
                //1. scale current_fs down to 80%
                scale = 1 - (1 - now) * 0.2;
                //2. bring next_fs from the right(50%)
                left = (now * 50) + "%";
                //3. increase opacity of next_fs to 1 as it moves in
                opacity = 1 - now;
                current_fs.css({
                    'transform': 'scale(' + scale + ')',
                    'position': 'absolute'
                });
                next_fs.css({ 'left': left, 'opacity': opacity });
            },
            duration: 1800,
            complete: function () {
                current_fs.hide();
                animating = false;
            },
            //this comes from the custom easing plugin
            easing: 'easeInOutBack'
        });
    }
    );

    $(".previous").click(function () {
        if (animating) return false;
        animating = true;

        current_fs = $(".fieldset" + i).parent();
        previous_fs = current_fs.prev();

        current_fs.addClass("inActive");
        previous_fs.removeClass("inActive");
        i--;
        //de-activate current step on progressbar
        //$("#progressbar li").eq($("fieldset").index(current_fs)).removeClass("active");

        //show the previous fieldset
        previous_fs.show();
        //hide the current fieldset with style
        current_fs.animate({ opacity: 0 }, {
            step: function (now, mx) {
                //as the opacity of current_fs reduces to 0 - stored in "now"
                //1. scale previous_fs from 80% to 100%
                scale = 0.8 + (1 - now) * 0.2;
                //2. take current_fs to the right(50%) - from 0%
                left = ((1 - now) * 50) + "%";
                //3. increase opacity of previous_fs to 1 as it moves in
                opacity = 1 - now;
                current_fs.css({ 'left': left });
                previous_fs.css({ 'transform': 'scale(' + scale + ')', 'opacity': opacity });
            },
            duration: 800,
            complete: function () {
                current_fs.hide();
                animating = false;
            },
            //this comes from the custom easing plugin
            easing: 'easeInOutBack'
        });
    });

    $(".valchangeonconfirm").click(function () {
        var a = $("#datetimetext").html();
        var ele = document.getElementsByName('optionsTimeslots');
        var ele1 = document.getElementsByName('difftimezones');
        for (var i = 0; i < ele1.length; i++) {
            if (ele1[i].selected) {
                $("#Timezonetext").html(ele1[i].value);
                $("#Timezonetext1").html(ele1[i].value);
            }
        }
        for (var i = 0; i < ele.length; i++) {
            if (ele[i].checked) {
                let hours = parseInt(ele[i].value.split(':')[0]);
                let minutes = parseInt(ele[i].value.split(':')[1]);
                minutes += 30;
                // if an hour is exceeded, add it to hours instead
                // and account for a day passing by
                if (minutes >= 60) {
                    hours = (hours + 1) % 24;
                    minutes -= 60;
                }
                // reformat values as strings with a fix length of 2
                hours = (hours < 10 ? `0${hours}` : `${hours}`);
                minutes = (minutes < 10 ? `0${minutes}` : `${minutes}`);
                // assign new value to the end input
                const end = `${hours}:${minutes}`;
                $("#resultdatetimezone").html(ele[i].value + "-" + end + ", " + a);
                $("#resultdatetimezone1").html(ele[i].value + "-" + end + ", " + a);
                timeslot = 1;
            }
        }
    });
</script>
